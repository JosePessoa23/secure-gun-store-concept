<div class="container d-flex flex-column p-5 gap-5">
  <div class="d-flex flex-column gap-5">
    <div class="w-100 d-flex flex-column gap-5" *ngIf="!changed">
      <span class="w-100 fs-2 fw-bold text-primary">Change Password</span>

      <form
        [formGroup]="form"
        (ngSubmit)="submit()"
        (input)="onPasswordInput()"
        data-mode="onLight"
      >
        <div class="d-flex flex-column gap-4 align-items-start">
          <div class="d-flex flex-column gap-3 align-items-start w-100">
            <tui-input class="w-50" formControlName="email">
              Email
              <input placeholder="Enter your email" tuiTextfield type="email" />
              <span class="tui-required"></span>
            </tui-input>
          </div>

          <div class="d-flex flex-column gap-3 align-items-start w-100">
            <tui-input-password
              class="w-50"
              formControlName="oldPassword"
              tuiTextfieldSize="m"
            >
              Old Password
              <input placeholder="Enter old password" tuiTextfield />
              <span class="tui-required"></span>
            </tui-input-password>
          </div>

          <div class="d-flex flex-column gap-3 align-items-start w-100">
            <tui-input-password
              class="w-50"
              formControlName="newPassword"
              tuiTextfieldSize="m"
            >
              New Password
              <input placeholder="Enter new password" tuiTextfield />
              <span class="tui-required"></span>
            </tui-input-password>
          </div>

          <div class="password-strength-meter w-50">
            <div
              class="password-strength-meter-bar"
              [ngStyle]="{
                width: passwordStrength * 25 + '%',
                'background-color': getPasswordStrengthColor()
              }"
            ></div>
          </div>
          <div class="password-strength-meter-text w-50">
            Strength: {{ getPasswordStrengthLabel() }}
          </div>

          <div class="d-flex flex-column gap-3 align-items-start w-100">
            <tui-input-password
              class="w-50"
              formControlName="newPasswordConfirmation"
              tuiTextfieldSize="m"
            >
              Confirm New Password
              <input placeholder="Confirm new password" tuiTextfield />
              <span class="tui-required"></span>
            </tui-input-password>
          </div>

          <button
            [disabled]="!form.valid"
            class="mt-3 w-25 rounded-pill"
            tuiButton
            type="submit"
          >
            Change Password
          </button>
        </div>
      </form>
    </div>

    <div *ngIf="changed" class="d-flex flex-column gap-3 align-items-center">
      <span class="fs-3 fw-bold">Password changed successfully!</span>
      <span class="fs-5"
        >Would you like to log out from all active sessions?</span
      >
      <div class="d-flex flex-row gap-3">
        <button
          tuiButton
          appearance="primary"
          routerLink="../activeSessions"
        >
          Yes
        </button>
        <button tuiButton appearance="primary" routerLink="../">No</button>
      </div>
    </div>
  </div>
</div>
